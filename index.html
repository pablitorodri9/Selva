<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MisiÃ³n Selva: Â¡Exploradores en AcciÃ³n!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #FDFBF7;
            scroll-behavior: smooth;
        }
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        /* Clases para manejar visibilidad */
        .hidden { display: none; }
        .block { display: block; }
        
        /* Estilos interactivos */
        .layer-item:hover { filter: brightness(1.05); }
        .layer-active { 
            box-shadow: inset 0 0 0 8px #FACC15; /* Anillo amarillo */
        }
        
        /* Animaciones simples */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="selection:bg-green-200">

    <nav class="sticky top-0 z-50 bg-green-500 shadow-lg p-4 rounded-b-3xl mx-2 md:mx-8 mt-2">
        <div class="container mx-auto flex justify-between items-center text-white">
            <div class="font-bold text-2xl">ğŸ¦ MisiÃ³n Selva</div>
            <div class="flex gap-4">
                <button onclick="scrollToId('habitat')" class="font-bold hover:text-yellow-200 transition">Hogar</button>
                <button onclick="scrollToId('games')" class="bg-yellow-400 text-yellow-900 px-4 py-1 rounded-full font-bold hover:bg-yellow-300 transition">Â¡Jugar!</button>
            </div>
        </div>
    </nav>

    <header class="container mx-auto px-4 py-16 text-center">
        <div class="bg-white rounded-[3rem] shadow-2xl p-10 max-w-4xl mx-auto border-b-8 border-green-500">
            <div class="text-7xl mb-6">ğŸŒ¿ğŸ”ğŸ¦œ</div>
            <h1 class="text-4xl md:text-6xl font-bold text-green-600 mb-6">Â¡Hola, Explorador!</h1>
            <p className="text-xl text-gray-600 mb-10">Hoy aprenderemos sobre la selva y sus misterios.</p>
            <button onclick="scrollToId('games')" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-12 rounded-full text-2xl shadow-lg transition transform hover:scale-105">
                Â¡Ponte a Prueba! ğŸ®
            </button>
        </div>
    </header>

    <section id="habitat" class="container mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold text-center text-green-700 mb-10">ğŸ  Las Capas de la Selva</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 max-w-5xl mx-auto">
            <div class="flex flex-col h-[500px] rounded-3xl overflow-hidden shadow-2xl border-4 border-green-800">
                <div onclick="selectLayer('emergente')" id="btn-emergente" class="layer-item flex-1 bg-blue-200 flex items-center justify-center cursor-pointer transition-all layer-active">
                    <span class="text-4xl">ğŸ¦…</span>
                </div>
                <div onclick="selectLayer('dosel')" id="btn-dosel" class="layer-item flex-1 bg-green-400 flex items-center justify-center cursor-pointer transition-all">
                    <span class="text-4xl">ğŸ’</span>
                </div>
                <div onclick="selectLayer('sotobosque')" id="btn-sotobosque" class="layer-item flex-1 bg-green-600 flex items-center justify-center cursor-pointer transition-all">
                    <span class="text-4xl">ğŸ†</span>
                </div>
                <div onclick="selectLayer('suelo')" id="btn-suelo" class="layer-item flex-1 bg-yellow-800 flex items-center justify-center cursor-pointer transition-all">
                    <span class="text-4xl">ğŸœ</span>
                </div>
            </div>
            
            <div class="bg-white rounded-3xl p-10 shadow-xl flex flex-col items-center justify-center border-t-8 border-yellow-400">
                <div id="layer-icon" class="text-8xl mb-6 animate-float">ğŸ¦…</div>
                <h3 id="layer-title" class="text-3xl font-bold text-green-800 mb-4">El Ãtico (Emergente)</h3>
                <p id="layer-desc" class="text-xl text-center text-gray-600">Â¡AquÃ­ da mucho el sol! Es la parte mÃ¡s alta de los Ã¡rboles gigantes.</p>
            </div>
        </div>
    </section>

    <section class="bg-green-50 py-20 mt-12">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-green-700 mb-10">ğŸ“¸ Ãlbum de Animales</h2>
            
            <div class="flex justify-center gap-3 mb-10 overflow-x-auto p-2">
                <button onclick="filterAnimals('all')" class="filter-btn px-6 py-2 rounded-full font-bold shadow bg-green-600 text-white" data-filter="all">Todos</button>
                <button onclick="filterAnimals('walk')" class="filter-btn px-6 py-2 rounded-full font-bold shadow bg-white text-green-800" data-filter="walk">Caminan</button>
                <button onclick="filterAnimals('fly')" class="filter-btn px-6 py-2 rounded-full font-bold shadow bg-white text-green-800" data-filter="fly">Vuelan</button>
                <button onclick="filterAnimals('swim')" class="filter-btn px-6 py-2 rounded-full font-bold shadow bg-white text-green-800" data-filter="swim">Nadan</button>
            </div>

            <div id="animals-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-6xl mx-auto">
                </div>
        </div>
    </section>

    <section id="fun" class="container mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold text-center text-green-700 mb-12">ğŸ“Š Datos Curiosos</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto">
            
            <div class="bg-white rounded-3xl shadow-xl p-8 border-l-8 border-blue-400">
                <h3 class="text-xl font-bold text-blue-600 mb-6 text-center">âš¡ Velocidad (Carrera)</h3>
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between font-bold mb-1"><span>ğŸ† Jaguar</span><span>80 km/h</span></div>
                        <div class="w-full bg-gray-200 rounded-full h-6"><div class="bg-blue-500 h-6 rounded-full" style="width: 100%"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between font-bold mb-1"><span>ğŸ¦œ TucÃ¡n</span><span>40 km/h</span></div>
                        <div class="w-full bg-gray-200 rounded-full h-6"><div class="bg-green-500 h-6 rounded-full" style="width: 50%"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between font-bold mb-1"><span>ğŸ‘¦ NiÃ±o</span><span>20 km/h</span></div>
                        <div class="w-full bg-gray-200 rounded-full h-6"><div class="bg-yellow-500 h-6 rounded-full" style="width: 25%"></div></div>
                    </div>
                     <div>
                        <div class="flex justify-between font-bold mb-1"><span>ğŸ¦¥ Perezoso</span><span>0.2 km/h</span></div>
                        <div class="w-full bg-gray-200 rounded-full h-6"><div class="bg-purple-500 h-6 rounded-full" style="width: 2%"></div></div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-xl p-8 border-l-8 border-orange-400 flex flex-col items-center">
                <h3 class="text-xl font-bold text-orange-600 mb-6 text-center">ğŸ½ï¸ Dieta de la Selva</h3>
                <div class="relative w-48 h-48 rounded-full" style="background: conic-gradient(#EF4444 0% 37%, #10B981 37% 62%, #F59E0B 62% 87%, #6366F1 87% 100%);"></div>
                <div class="grid grid-cols-2 gap-4 mt-6 text-sm font-bold">
                    <div class="flex items-center gap-2"><div class="w-4 h-4 bg-red-500 rounded"></div>Carne (37%)</div>
                    <div class="flex items-center gap-2"><div class="w-4 h-4 bg-green-500 rounded"></div>Plantas (25%)</div>
                    <div class="flex items-center gap-2"><div class="w-4 h-4 bg-yellow-500 rounded"></div>Frutas (25%)</div>
                    <div class="flex items-center gap-2"><div class="w-4 h-4 bg-indigo-500 rounded"></div>Bichos (13%)</div>
                </div>
            </div>
        </div>
    </section>

    <section id="games" class="container mx-auto px-4 py-16">
        <div class="bg-white rounded-[3rem] shadow-2xl p-8 max-w-4xl mx-auto border-t-8 border-green-500 relative">
            
            <div id="game-menu" class="text-center">
                <h2 class="text-4xl font-bold text-green-700 mb-4">ğŸ® Ponte a Prueba</h2>
                <p className="text-xl text-gray-600 mb-10">Â¡Demuestra que eres un gran explorador!</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                    <button onclick="startGame('layers')" class="bg-blue-100 hover:bg-blue-200 p-8 rounded-3xl border-b-8 border-blue-400 transition-all active:translate-y-2">
                        <div class="text-5xl mb-2">ğŸ </div><div class="font-bold text-blue-800">Â¿DÃ³nde vivo?</div>
                    </button>
                    <button onclick="startGame('movement')" class="bg-green-100 hover:bg-green-200 p-8 rounded-3xl border-b-8 border-green-400 transition-all active:translate-y-2">
                        <div class="text-5xl mb-2">ğŸ¾</div><div class="font-bold text-green-800">Â¿CÃ³mo me muevo?</div>
                    </button>
                    <button onclick="startGame('speed')" class="bg-orange-100 hover:bg-orange-200 p-8 rounded-3xl border-b-8 border-orange-400 transition-all active:translate-y-2">
                        <div class="text-5xl mb-2">âš¡</div><div class="font-bold text-orange-800">El mÃ¡s rÃ¡pido</div>
                    </button>
                </div>
            </div>

            <div id="game-area" class="hidden text-center relative">
                <button onclick="showMenu()" class="absolute top-0 right-0 text-gray-400 text-3xl hover:text-red-500 font-bold px-4">Ã—</button>
                <div class="flex justify-between items-center mb-8">
                    <span class="bg-yellow-400 text-yellow-900 px-6 py-2 rounded-full font-bold text-lg">Puntos: <span id="score">0</span></span>
                </div>
                
                <div class="mb-8">
                    <div id="game-icon" class="text-9xl animate-bounce mb-4">â“</div>
                    <h3 id="game-question" class="text-2xl md:text-3xl font-bold text-gray-800">Pregunta...</h3>
                </div>

                <div id="game-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </div>

                <div id="game-feedback" class="mt-6 font-bold text-2xl hidden"></div>
            </div>

        </div>
    </section>

    <footer class="bg-green-700 text-white py-20 text-center rounded-t-[4rem] mt-12">
        <div class="text-5xl mb-4">ğŸ†</div>
        <h2 class="text-4xl font-bold mb-4">Â¡Eres un SÃºper Explorador!</h2>
        <p class="text-xl opacity-80">Gracias por cuidar la selva conmigo.</p>
    </footer>

    <script>
        // --- DATOS ---
        const ANIMALS = [
            { id: 1, name: "LeÃ³n", icon: "ğŸ¦", type: "walk", diet: "meat", desc: "El Rey de la selva." },
            { id: 2, name: "TucÃ¡n", icon: "ğŸ¦œ", type: "fly", diet: "fruit", desc: "Pico de colores." },
            { id: 3, name: "Cocodrilo", icon: "ğŸŠ", type: "swim", diet: "meat", desc: "Dientes grandes." },
            { id: 4, name: "Elefante", icon: "ğŸ˜", type: "walk", diet: "plant", desc: "El mÃ¡s pesado." },
            { id: 5, name: "Mono", icon: "ğŸ’", type: "walk", diet: "fruit", desc: "Salta Ã¡rboles." },
            { id: 6, name: "Serpiente", icon: "ğŸ", type: "walk", diet: "meat", desc: "Se arrastra." },
            { id: 7, name: "Ãguila", icon: "ğŸ¦…", type: "fly", diet: "meat", desc: "Vuela alto." },
            { id: 8, name: "Rana", icon: "ğŸ¸", type: "swim", diet: "bug", desc: "Come moscas." }
        ];

        const LAYERS = {
            emergente: { title: "El Ãtico (Emergente)", desc: "Â¡AquÃ­ da mucho el sol! Es la parte mÃ¡s alta.", icon: "ğŸ¦…", color: "bg-blue-200" },
            dosel: { title: "El Techo (Dosel)", desc: "Es como el techo de la selva. Viven monos.", icon: "ğŸ’", color: "bg-green-400" },
            sotobosque: { title: "Piso Medio", desc: "Poca luz. Los jaguares cazan aquÃ­.", icon: "ğŸ†", color: "bg-green-600" },
            suelo: { title: "El Suelo", desc: "Oscuro y hÃºmedo. Insectos y elefantes.", icon: "ğŸœ", color: "bg-yellow-800" }
        };

        const SPEED = { 'LeÃ³n': 80, 'TucÃ¡n': 40, 'Cocodrilo': 25, 'Elefante': 40, 'Mono': 35, 'Serpiente': 15, 'Ãguila': 120, 'Rana': 10 };

        // --- FUNCIONES VISUALES ---
        function scrollToId(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        function selectLayer(layerKey) {
            // Actualizar textos
            const data = LAYERS[layerKey];
            document.getElementById('layer-title').innerText = data.title;
            document.getElementById('layer-desc').innerText = data.desc;
            document.getElementById('layer-icon').innerText = data.icon;
            
            // Actualizar estilo botones
            document.querySelectorAll('.layer-item').forEach(el => el.classList.remove('layer-active'));
            document.getElementById('btn-' + layerKey).classList.add('layer-active');
        }

        function filterAnimals(filterType) {
            const grid = document.getElementById('animals-grid');
            grid.innerHTML = ''; // Limpiar
            
            const filtered = filterType === 'all' ? ANIMALS : ANIMALS.filter(a => a.type === filterType);
            
            filtered.forEach(animal => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-3xl text-center shadow-lg border-b-4 border-green-200 fade-in";
                card.innerHTML = `<div class="text-6xl mb-2">${animal.icon}</div><div class="font-bold text-xl text-green-900">${animal.name}</div><p class="text-sm text-gray-500">${animal.desc}</p>`;
                grid.appendChild(card);
            });

            // Botones visuales
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.filter === filterType) {
                    btn.className = "filter-btn px-6 py-2 rounded-full font-bold shadow bg-green-600 text-white transition";
                } else {
                    btn.className = "filter-btn px-6 py-2 rounded-full font-bold shadow bg-white text-green-800 transition";
                }
            });
        }

        // --- LÃ“GICA DE JUEGOS ---
        let currentScore = 0;
        let currentGameMode = '';
        let currentQuestion = null;

        function showMenu() {
            document.getElementById('game-menu').classList.remove('hidden');
            document.getElementById('game-area').classList.add('hidden');
        }

        function startGame(mode) {
            currentGameMode = mode;
            document.getElementById('game-menu').classList.add('hidden');
            document.getElementById('game-area').classList.remove('hidden');
            generateQuestion();
        }

        function generateQuestion() {
            document.getElementById('game-feedback').classList.add('hidden');
            const optionsDiv = document.getElementById('game-options');
            optionsDiv.innerHTML = '';

            let qText = '';
            let icon = '';
            let correctAnswer = '';
            
            const randomAnimal = ANIMALS[Math.floor(Math.random() * ANIMALS.length)];

            if (currentGameMode === 'layers') {
                qText = `Â¿En quÃ© capa vive el ${randomAnimal.name}?`;
                icon = randomAnimal.icon;
                
                // LÃ³gica simple para respuesta correcta
                if (randomAnimal.type === 'fly') correctAnswer = 'emergente';
                else if (['Mono', 'TucÃ¡n'].includes(randomAnimal.name)) correctAnswer = 'dosel';
                else if (randomAnimal.name === 'Serpiente') correctAnswer = 'sotobosque';
                else correctAnswer = 'suelo';

                // Botones de opciones
                Object.keys(LAYERS).forEach(key => {
                    createOptionBtn(LAYERS[key].title.split('(')[0], key, correctAnswer, optionsDiv);
                });

            } else if (currentGameMode === 'movement') {
                qText = `Â¿CÃ³mo se desplaza el ${randomAnimal.name}?`;
                icon = randomAnimal.icon;
                correctAnswer = randomAnimal.type;
                
                createOptionBtn("ğŸ¾ Camina", "walk", correctAnswer, optionsDiv);
                createOptionBtn("ğŸ¦… Vuela", "fly", correctAnswer, optionsDiv);
                createOptionBtn("ğŸŒŠ Nada", "swim", correctAnswer, optionsDiv);

            } else if (currentGameMode === 'speed') {
                qText = "Â¿CuÃ¡l es el mÃ¡s rÃ¡pido?";
                icon = "ğŸ";
                // Tomar 3 animales al azar
                const shuffled = [...ANIMALS].sort(() => 0.5 - Math.random()).slice(0, 3);
                const fastest = [...shuffled].sort((a, b) => SPEED[b.name] - SPEED[a.name])[0];
                correctAnswer = fastest.id;

                shuffled.forEach(animal => {
                    createOptionBtn(`${animal.icon} ${animal.name}`, animal.id, correctAnswer, optionsDiv);
                });
            }

            document.getElementById('game-question').innerText = qText;
            document.getElementById('game-icon').innerText = icon;
        }

        function createOptionBtn(text, value, correct, container) {
            const btn = document.createElement('button');
            btn.className = "bg-gray-100 hover:bg-gray-200 p-6 rounded-2xl text-xl font-bold transition border-b-4 border-gray-300 active:border-b-0 active:translate-y-1";
            btn.innerText = text;
            btn.onclick = () => checkAnswer(value, correct);
            container.appendChild(btn);
        }

        function checkAnswer(selected, correct) {
            const fb = document.getElementById('game-feedback');
            fb.classList.remove('hidden');
            
            // ConversiÃ³n a string por si acaso (ids numÃ©ricos vs string)
            if (String(selected) === String(correct)) {
                currentScore += 10;
                document.getElementById('score').innerText = currentScore;
                fb.innerText = "Â¡Correcto! ğŸŒŸ";
                fb.className = "mt-6 font-bold text-2xl text-green-600 animate-bounce";
                setTimeout(generateQuestion, 1500);
            } else {
                fb.innerText = "Â¡Casi! IntÃ©ntalo de nuevo ğŸŒ¿";
                fb.className = "mt-6 font-bold text-2xl text-red-500";
            }
        }

        // Inicializar
        filterAnimals('all');
    </script>
</body>
</html>
